<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>틱톡 대학생 AR 메이커톤</title>
    <link rel="icon" href="image/TikTok_Circle.png">
    <link rel="stylesheet" href="faq_detail.css">
</head>
<body>
    <h1>문의하기</h1>
    <form id="contactForm">
        <div class="form-section">
            <img src="images/PC_faq_dtail_image1.jpg" alt="FAQ Detail Image 1" class="faq-image" id="faq-image1">
        </div>
        <div class="form-section">
            <input type="text" id="name" name="name" placeholder="문의자 명을 입력해주세요" required>
        </div>
        <div class="form-section">
            <img src="images/PC_faq_dtail_image2.jpg" alt="FAQ Detail Image 2" class="faq-image" id="faq-image2">
        </div>
        <div class="form-section phone-input">
            <input type="text" id="phone-part1" maxlength="3" placeholder="010" required>
            <input type="text" id="phone-part2" maxlength="4" placeholder="1234" required>
            <input type="text" id="phone-part3" maxlength="4" placeholder="1234" required>
        </div>
        <div class="form-section">
            <img src="images/PC_faq_dtail_image3.jpg" alt="FAQ Detail Image 3" class="faq-image" id="faq-image3">
        </div>
        <div class="form-section email-input">
            <input type="text" id="email-prefix" placeholder="메일 앞 주소" required>
            <select id="email-domain" required>
                <option value="">직접입력</option>
                <option value="naver.com">naver.com</option>
                <option value="gmail.com">gmail.com</option>
            </select>
        </div>
        <div class="form-section">
            <img src="images/PC_faq_dtail_image4.jpg" alt="FAQ Detail Image 4" class="faq-image" id="faq-image4">
        </div>
        <div class="form-section">
            <input type="text" id="subject" name="subject" placeholder="제목을 입력해주세요" required>
        </div>
        <div class="form-section">
            <img src="images/PC_faq_dtail_image5.jpg" alt="FAQ Detail Image 5" class="faq-image" id="faq-image5">
        </div>
        <div class="form-section">
            <textarea id="message" name="message" placeholder="문의 내용을 입력해주세요" required></textarea>
        </div>
        <div class="form-section">
            <img src="images/PC_faq_dtail_image6.jpg" alt="FAQ Detail Image 6" class="faq-image" id="faq-image6">
        </div>
        <div class="form-section">
            <input type="file" id="file" name="file">
        </div>
        <div class="form-section">
            <img src="images/PC_faq_dtail_image7.jpg" alt="FAQ Detail Image 7" class="faq-image" id="faq-image7">
        </div>
        <div class="form-section privacy-policy">
            <p>개인정보 처리방침 내용이 여기에 들어갑니다...</p>
        </div>
        <div class="form-section">
            <label><input type="checkbox" id="agree" name="agree" required> 개인정보 수집 및 이용에 대해서 동의합니다</label>
        </div>
        <div class="form-section">
            <img src="images/PC_faq_dtail_image8.jpg" alt="FAQ Detail Image 8" class="faq-image" id="faq-image8">
        </div>
        <div class="form-section">
            <input type="submit" id="submitBtn" value="제출" disabled>
        </div>
        <div class="form-section">
            <img src="images/PC_faq_dtail_image9.jpg" alt="FAQ Detail Image 9" class="faq-image" id="faq-image9">
        </div>
    </form>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-firestore.js"></script>
    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCXqd76-zyuGaoiSlPRTRyOFOexFNSEvzU",
            authDomain: "tiktok-make-a-thone.firebaseapp.com",
            databaseURL: "https://tiktok-make-a-thone-default-rtdb.firebaseio.com/",
            projectId: "tiktok-make-a-thone",
            storageBucket: "tiktok-make-a-thone.appspot.com",
            messagingSenderId: "115792141686",
            appId: "1:115792141686:web:769093b032edc8fe3fae57",
            measurementId: "G-HWK7WPT42N"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const contactForm = document.getElementById('contactForm');
        const submitBtn = document.getElementById('submitBtn');
        const agreeCheckbox = document.getElementById('agree');

        // Enable submit button only if agree checkbox is checked
        agreeCheckbox.addEventListener('change', () => {
            submitBtn.disabled = !agreeCheckbox.checked;
        });

        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const name = document.getElementById('name').value;
            const phone = `${document.getElementById('phone-part1').value}-${document.getElementById('phone-part2').value}-${document.getElementById('phone-part3').value}`;
            const emailPrefix = document.getElementById('email-prefix').value;
            const emailDomain = document.getElementById('email-domain').value || document.getElementById('email-domain-input').value;
            const email = `${emailPrefix}@${emailDomain}`;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            const file = document.getElementById('file').files[0];

            const newMessageRef = database.ref('messages').push();
            newMessageRef.set({
                name: name,
                phone: phone,
                email: email,
                subject: subject,
                message: message
            }).then(() => {
                alert('문의사항이 성공적으로 제출되었습니다.');
                contactForm.reset();
                submitBtn.disabled = true;
                window.location.href = 'index.html';
            }).catch((error) => {
                console.error('Error submitting contact form: ', error);
                alert('문의사항 제출 중 오류가 발생했습니다.');
            });
        });
    </script>
</body>
</html>
