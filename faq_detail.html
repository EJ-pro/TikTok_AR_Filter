<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>틱톡 대학생 AR 메이커톤</title>
    <link rel="icon" href="image/TikTok_Circle.png">
    <link rel="stylesheet" href="./css/faq_detail.css">
</head>
<body>
    <h1>문의하기</h1>
    <main>
        <section class="images">
            <img src="image/faq_detail/PC_faq_detail_image1.png" alt="PC FAQ Detail Image 1" class="width-100 pc-only">
            <img src="image/faq_detail/Tab_faq_detail_image1.png" alt="Tab FAQ Detail Image 1" class="width-100 tab-only">
            <img src="image/faq_detail/Mobile_faq_detail_image1.png" alt="Mobile FAQ Detail Image 1" class="width-100 mobile-only">

            <div class="form-section pc-only">
                <input type="text" id="name-pc" name="name" placeholder="문의자 명을 입력해주세요" required  style="width: 720px; height: 70px;">
            </div>
            <div class="form-section tab-only">
                <input type="text" id="name-tab" name="name" placeholder="문의자 명을 입력해주세요" required>
            </div>
            <div class="form-section mobile-only">
                <input type="text" id="name-mobile" name="name" placeholder="문의자 명을 입력해주세요" required>
            </div>

            <img src="image/faq_detail/PC_faq_detail_image2.png" alt="FAQ Detail Image 2" class="width-100 pc-only">
            <img src="image/faq_detail/Tab_faq_detail_image2.png" alt="FAQ Detail Image 2" class="width-100 tab-only">
            <img src="image/faq_detail/Mobile_faq_detail_image2.png" alt="FAQ Detail Image 2" class="width-100 mobile-only">

            <div class="form-section pc-only phone-input">
                <input type="text" id="phone-part1-pc" maxlength="3" placeholder="010" required>
                <input type="text" id="phone-part2-pc" maxlength="4" placeholder="1234" required>
                <input type="text" id="phone-part3-pc" maxlength="4" placeholder="1234" required>
            </div>
            <div class="form-section tab-only phone-input">
                <input type="text" id="phone-part1-tab" maxlength="3" placeholder="010" required>
                <input type="text" id="phone-part2-tab" maxlength="4" placeholder="1234" required>
                <input type="text" id="phone-part3-tab" maxlength="4" placeholder="1234" required>
            </div>
            <div class="form-section mobile-only phone-input">
                <input type="text" id="phone-part1-mobile" maxlength="3" placeholder="010" required>
                <input type="text" id="phone-part2-mobile" maxlength="4" placeholder="1234" required>
                <input type="text" id="phone-part3-mobile" maxlength="4" placeholder="1234" required>
            </div>

            <img src="image/faq_detail/PC_faq_detail_image3.png" alt="FAQ Detail Image 3" class="width-100 pc-only">
            <img src="image/faq_detail/Tab_faq_detail_image3.png" alt="FAQ Detail Image 3" class="width-100 tab-only">
            <img src="image/faq_detail/Mobile_faq_detail_image3.png" alt="FAQ Detail Image 3" class="width-100 mobile-only">

            <div class="form-section pc-only email-input">
                <input type="text" id="email-prefix-pc" placeholder="메일 앞 주소" required>
                <span>@</span>
                <input type="text" id="email-domain-pc" placeholder="도메인" required>
                <select id="email-select-pc">
                    <option value="">직접입력</option>
                    <option value="naver.com">naver.com</option>
                    <option value="gmail.com">gmail.com</option>
                </select>
            </div>
            <div class="form-section tab-only email-input">
                <input type="text" id="email-prefix-tab" placeholder="메일 앞 주소" required>
                <span>@</span>
                <input type="text" id="email-domain-tab" placeholder="도메인" required>
                <select id="email-select-tab">
                    <option value="">직접입력</option>
                    <option value="naver.com">naver.com</option>
                    <option value="gmail.com">gmail.com</option>
                </select>
            </div>
            <div class="form-section mobile-only email-input">
                <input type="text" id="email-prefix-mobile" placeholder="메일 앞 주소" required>
                <span>@</span>
                <input type="text" id="email-domain-mobile" placeholder="도메인" required>
                <select id="email-select-mobile">
                    <option value="">직접입력</option>
                    <option value="naver.com">naver.com</option>
                    <option value="gmail.com">gmail.com</option>
                </select>
            </div>

            <img src="image/faq_detail/PC_faq_detail_image4.png" alt="FAQ Detail Image 4" class="width-100 pc-only">
            <img src="image/faq_detail/Tab_faq_detail_image4.png" alt="FAQ Detail Image 4" class="width-100 tab-only">
            <img src="image/faq_detail/Mobile_faq_detail_image4.png" alt="FAQ Detail Image 4" class="width-100 mobile-only">

            <div class="form-section pc-only">
                <input type="text" id="subject-pc" name="subject" placeholder="제목을 입력해주세요" required>
            </div>
            <div class="form-section tab-only">
                <input type="text" id="subject-tab" name="subject" placeholder="제목을 입력해주세요" required>
            </div>
            <div class="form-section mobile-only">
                <input type="text" id="subject-mobile" name="subject" placeholder="제목을 입력해주세요" required>
            </div>

            <img src="image/faq_detail/PC_faq_detail_image5.png" alt="FAQ Detail Image 5" class="width-100 pc-only">
            <img src="image/faq_detail/Tab_faq_detail_image5.png" alt="FAQ Detail Image 5" class="width-100 tab-only">
            <img src="image/faq_detail/Mobile_faq_detail_image5.png" alt="FAQ Detail Image 5" class="width-100 mobile-only">

            <div class="form-section pc-only">
                <textarea id="message-pc" name="message" placeholder="문의 내용을 입력해주세요" required></textarea>
            </div>
            <div class="form-section tab-only">
                <textarea id="message-tab" name="message" placeholder="문의 내용을 입력해주세요" required></textarea>
            </div>
            <div class="form-section mobile-only">
                <textarea id="message-mobile" name="message" placeholder="문의 내용을 입력해주세요" required></textarea>
            </div>

            <img src="image/faq_detail/PC_faq_detail_image6.png" alt="FAQ Detail Image 6" class="width-100 pc-only">
            <img src="image/faq_detail/Tab_faq_detail_image6.png" alt="FAQ Detail Image 6" class="width-100 tab-only">
            <img src="image/faq_detail/Mobile_faq_detail_image6.png" alt="FAQ Detail Image 6" class="width-100 mobile-only">

            <div class="form-section pc-only">
                <input type="file" id="file-pc" name="file">
            </div>
            <div class="form-section tab-only">
                <input type="file" id="file-tab" name="file">
            </div>
            <div class="form-section mobile-only">
                <input type="file" id="file-mobile" name="file">
            </div>

            <img src="image/faq_detail/PC_faq_detail_image7.png" alt="FAQ Detail Image 7" class="width-100 pc-only">
            <img src="image/faq_detail/Tab_faq_detail_image7.png" alt="FAQ Detail Image 7" class="width-100 tab-only">
            <img src="image/faq_detail/Mobile_faq_detail_image7.png" alt="FAQ Detail Image 7" class="width-100 mobile-only">

            <div class="form-section pc-only privacy-policy">
                <p>개인정보 처리방침 내용이 여기에 들어갑니다...</p>
            </div>
            <div class="form-section tab-only privacy-policy">
                <p>개인정보 처리방침 내용이 여기에 들어갑니다...</p>
            </div>
            <div class="form-section mobile-only privacy-policy">
                <p>개인정보 처리방침 내용이 여기에 들어갑니다...</p>
            </div>

            <div class="form-section pc-only">
                <label><input type="checkbox" id="agree-pc" name="agree" required> 개인정보 수집 및 이용에 대해서 동의합니다</label>
            </div>
            <div class="form-section tab-only">
                <label><input type="checkbox" id="agree-tab" name="agree" required> 개인정보 수집 및 이용에 대해서 동의합니다</label>
            </div>
            <div class="form-section mobile-only">
                <label><input type="checkbox" id="agree-mobile" name="agree" required> 개인정보 수집 및 이용에 대해서 동의합니다</label>
            </div>

            <img src="image/faq_detail/PC_faq_detail_image8.png" alt="FAQ Detail Image 8" class="width-100 pc-only">
            <img src="image/faq_detail/Tab_faq_detail_image8.png" alt="FAQ Detail Image 8" class="width-100 tab-only">
            <img src="image/faq_detail/Mobile_faq_detail_image8.png" alt="FAQ Detail Image 8" class="width-100 mobile-only">

            <div class="form-section pc-only">
                <button type="submit" id="submit-pc" class="submit-button disabled">전송</button>
            </div>
            <div class="form-section tab-only">
                <button type="submit" id="submit-tab" class="submit-button disabled">전송</button>
            </div>
            <div class="form-section mobile-only">
                <button type="submit" id="submit-mobile" class="submit-button disabled">전송</button>
            </div>

            <img src="image/faq_detail/PC_faq_detail_image9.png" alt="FAQ Detail Image 9" class="width-100 pc-only">
            <img src="image/faq_detail/Tab_faq_detail_image9.png" alt="FAQ Detail Image 9" class="width-100 tab-only">
            <img src="image/faq_detail/Mobile_faq_detail_image9.png" alt="FAQ Detail Image 9" class="width-100 mobile-only">
        </section>
    </main>

    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"></script>
    <script>
        // Firebase configuration and initialization code here...

        // 이메일 도메인 자동 채우기 기능
        function setupEmailDomain(selectId, domainInputId) {
            const emailSelect = document.getElementById(selectId);
            const emailDomainInput = document.getElementById(domainInputId);

            emailSelect.addEventListener('change', () => {
                if (emailSelect.value) {
                    emailDomainInput.value = emailSelect.value;
                    emailDomainInput.setAttribute('readonly', 'readonly');
                } else {
                    emailDomainInput.value = '';
                    emailDomainInput.removeAttribute('readonly');
                }
            });
        }

        setupEmailDomain('email-select-pc', 'email-domain-pc');
        setupEmailDomain('email-select-tab', 'email-domain-tab');
        setupEmailDomain('email-select-mobile', 'email-domain-mobile');

        // 문의사항 제출 처리
        const contactForm = document.getElementById('contactForm');
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const name = document.querySelector('input[name="name"]:valid').value;
            const phonePart1 = document.querySelector('input[name="phone-part1"]:valid').value;
            const phonePart2 = document.querySelector('input[name="phone-part2"]:valid').value;
            const phonePart3 = document.querySelector('input[name="phone-part3"]:valid').value;
            const phone = `${phonePart1}-${phonePart2}-${phonePart3}`;
            const emailPrefix = document.querySelector('input[name="email-prefix"]:valid').value;
            const emailDomain = document.querySelector('input[name="email-domain"]:valid').value;
            const email = `${emailPrefix}@${emailDomain}`;
            const subject = document.querySelector('input[name="subject"]:valid').value;
            const message = document.querySelector('textarea[name="message"]:valid').value;
            const timestamp = new Date();

            try {
                await db.collection('FAQ').doc(message).set({
                    name,
                    phone,
                    email,
                    subject,
                    message,
                    timestamp
                });
                alert('문의사항이 성공적으로 제출되었습니다.');
                contactForm.reset();
                // 제출 후 Home 페이지로 이동
                window.location.href = 'index.html';
            } catch (error) {
                console.error('Error submitting contact form: ', error);
                alert('문의사항 제출 중 오류가 발생했습니다.');
            }
        });

        // 반응형 전송 버튼 활성화 및 비활성화 처리
        function updateSubmitButtonState() {
            const isAgreeChecked = document.querySelectorAll('input[name="agree"]:checked').length > 0;
            const areAllFieldsValid = document.querySelectorAll('input:required:valid, select:required:valid, textarea:required:valid').length === document.querySelectorAll('input:required, select:required, textarea:required').length;

            document.querySelectorAll('.submit-button').forEach(button => {
                if (isAgreeChecked && areAllFieldsValid) {
                    button.classList.remove('disabled');
                    button.removeAttribute('disabled');
                } else {
                    button.classList.add('disabled');
                    button.setAttribute('disabled', 'disabled');
                }
            });
        }

        document.querySelectorAll('input, select, textarea').forEach(input => {
            input.addEventListener('input', updateSubmitButtonState);
        });
        document.querySelectorAll('input[name="agree"]').forEach(checkbox => {
            checkbox.addEventListener('change', updateSubmitButtonState);
        });
    </script>
</body>
</html>